#Git add

`git add` 命令会将工作区中有变更的文件或者新增的文件添加到 Git 的暂存区中。被添加到暂存区中的变更的文件会被包含到下次进行的提交中。事实上，`git add` 命令并不会显式地影响代码库，甚至在变更提交之前，这些变更都不会被添加进版本历史记录。

在使用这些命令的同时，往往还需要使用 `git status` 查看 Git 代码库工作目录和暂存区的状态。

##Usage

1.  暂存 `<file>` 文件。

    ```bash
        git add <file>
    ```

2.  暂存 `<directory>` 目录中所有变更的文件。

    ```bash
        git add <directory>
    ```

3.  使用交互式操作处理工作区中的变更。当变更的文件非常多的时候可以使用该命令，可以更精准地暂存变更的文件。

    ```bash
        git add -p
    ```

##Discussion

`git add` 命令和 [`git commit`][3] 命令是使用 Git 的基础命令。无论是采用何种工作流，这两个命令是使用 Git 时都必须熟练掌握的命令。这2个命令是对代码进行版本控制的基础命令。

开发一个项目，基本上都会围绕编辑/暂存/提交这些操作进行。首先，你在工作区中编辑源码文件。当准备保存项目的当前状态的快照时，你可以使用 `git add` 命令将所有变更的文件暂存到暂存区中。之后你则可以使用 [`git commit`][3] 命令提交项目快照到项目的版本历史记录中。

![`git add` 示意图][m1]

Git 的 `add` 命令和 SVN 的 `add` 命令不同。不同于 SVN 的 `add` 命令是吧一个文件添加到代码库中，Git 的 `add` 命令的操作更加抽象，你需要在同一个文件的每一次修改后都使用 `git add` 命令。这看起来可能会觉得有些多余，但使得项目的变更更容易管理。

###暂存区

暂存区是 Git 特有的特性，如果你已经很习惯使用 SVN ，可能需要一段时间转换概念才能很好地理解 Git 的暂存区。 可以把暂存区看作是工作区和最终代码库的版本记录之间的缓存区。

暂存区主要用于将所有发生变更的文件进行更加合理地组织，然后对暂存区中关联度更高的变更集进行快照处理，之后将快照提交到版本历史记录中。这意味着你可以针对不相关的文件做各种各样的编辑，然后在暂存区，将这些变更组织成更加合理的变更集，再提交。和任何其它版本控制系统一样，Git 的提交是原子化的，这样很容易追踪变更集，并且能够在不影响其它部分的情况下撤销某一次提交或者回滚到特定的版本快照。

##Example

当你开始一个新的项目时，你可以使用如下命令来创建第一次提交：

```bash
    git add .
    git commit
```

当你在开发的过程中，可以使用如下命令添加新文件：

```bash
    git add hello.cs
    git commit
```

上面的命令还可以用于提交已经被 Git 追踪的文件。对于 Git ，添加一个新文件到暂存区，和把一个已经被 Git 追踪的变更文件添加到暂存区，是没有任何区别的。

##More resources

- [Git overview article][1]
- [Git tutorials: Saving changes][2]
- [Git commit][3]

<!-- Links -->
[1]: ./git-articles-overview.md
[2]: https://www.atlassian.com/git/tutorials/saving-changes/git-add
[3]: ./git-command-git-commit.md

<!-- Images -->
[m1]: ./media/git-command-git-add/git-add.png